<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>仿realme官网</title>
  <link rel="stylesheet" href="../css/header.css">
  <link rel="stylesheet" href="../css/resset.css">
  <link rel="stylesheet" href="../css/footer.css">
  <link rel="stylesheet" href="../css/section.css">
  <link rel="stylesheet" href="../css/detail.css">
  <link rel="stylesheet" href="../css/cart.css">
  <link rel="stylesheet" href="../images/font_2929536_dtp7au3p9ej/iconfont.css">
  <link rel="shortcut icon" href="favicon.ico" type="https://www.realme.com/favicon.ico">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_2790765_pqm82v7ytg.css">
</head>

<body>
  <header>
    <div class="wrapper">
      <a href="index.html">
        <span class="logo"></span>
      </a>
      <nav class="nav">
        <ul>
          <li><a href="javascript:;">真我GT Neo2T</a>

          </li>
          <li><a href="javascript:;">真奇喵</a></li>
          <li>
            <a href="javascript:;">手机</a>
            <div class="nav-submenu">
              <div class="nav-submenu-wrapper">
                <div class="submenu-tabs">
                  <div class="secondary-menu hover">
                    <p>GT系列</p>
                    <i class="visible"></i>
                  </div>
                  <div class="secondary-menu">
                    <p>Q系列</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>V系列</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>X系列</p>
                    <i></i>
                  </div>
                </div>
                <div class="submenu-container visible">
                  <ul>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT1.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p style="color: #2eb4cb;">新品</p>
                          <p>真我GT Neo2T</p>
                          <p class="nav-submenu-price">￥ 1,899</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT2.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo2</p>
                          <p class="nav-submenu-price">￥ 2,299</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT3.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 大师探索版</p>
                          <p class="nav-submenu-price">￥ 2,699</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT4.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 大师版</p>
                          <p class="nav-submenu-price">￥ 2,299</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT5.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo 闪速版</p>
                          <p class="nav-submenu-price">￥ 1,899</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT6.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo 5G</p>
                          <p class="nav-submenu-price">￥ 1,799</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT7.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 5G</p>
                          <p class="nav-submenu-price">￥ 2,499</p>
                        </div>
                      </a>
                    </li>


                  </ul>
                </div>
              </div>
            </div>
          </li>
          <li>
            <a href="javascript:;">AloT</a>
            <div class="nav-submenu">
              <div class="nav-submenu-wrapper">
                <div class="submenu-tabs">
                  <div class="secondary-menu hover">
                    <p>手表</p>
                    <i class="visible"></i>
                  </div>
                  <div class="secondary-menu">
                    <p>游戏配件</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>笔记本电脑</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>耳机</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>充电</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>服饰箱包</p>
                    <i></i>
                  </div>
                  <div class="secondary-menu">
                    <p>家具个护</p>
                    <i></i>
                  </div>
                </div>
                <div class="submenu-container visible">
                  <ul>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT1.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p style="color: #2eb4cb;">新品</p>
                          <p>真我GT Neo2T</p>
                          <p class="nav-submenu-price">￥ 1,899</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT2.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo2</p>
                          <p class="nav-submenu-price">￥ 2,299</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT3.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 大师探索版</p>
                          <p class="nav-submenu-price">￥ 2,699</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT4.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 大师版</p>
                          <p class="nav-submenu-price">￥ 2,299</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT5.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo 闪速版</p>
                          <p class="nav-submenu-price">￥ 1,899</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT6.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT Neo 5G</p>
                          <p class="nav-submenu-price">￥ 1,799</p>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:;">
                        <div class="nav-submenu-img">
                          <img src="../images/nav-GT7.png" alt="">
                        </div>
                        <div class="nav-submenu-info">
                          <p>真我GT 5G</p>
                          <p class="nav-submenu-price">￥ 2,499</p>
                        </div>
                      </a>
                    </li>


                  </ul>
                </div>
              </div>
            </div>
          </li>
          <li><a href="javascript:;">所有产品</a></li>
          <li><a href="javascript:;">品牌</a></li>
          <li><a href="javascript:;">服务</a></li>
          <li><a href="javascript:;">社区</a></li>
          <li><a href="javascript:;">APP</a></li>
        </ul>
      </nav>
      <div class="nav-right">
        <a href="javascript:;">
          <span class="icon-user"></span>
        </a>
        <ul>
          <li><a href="cart.html">购物车</a></li>
          <li><a href="javascript:;">我的订单</a></li>
          <li><a href="javascript:;">优惠券</a></li>
          <li><a href="javascript:;">R码</a></li>
          <li><a href="javascript:;">我的评论</a></li>
          <li><a href="javascript:;">账户信息</a></li>
          <li><a href="javascript:;">我的地址</a></li>
          <li></li>
        </ul>
      </div>

    </div>
  </header>
  <div class="container w">
    <div class="cart-main">
        <div class="cart-wrap">
            <div class="list-header">
                <div class="col col-check">
                    <label>
                        <input type="checkbox" class="check-all">&emsp;全选
                    </label>
                </div>
                <div class="col col-img"></div>
                <div class="col col-detail">商品名称</div>
                <div class="col col-price">单价</div>
                <div class="col col-count">数量</div>
                <div class="col col-subtotal">小计</div>
                <div class="col col-operate">操作</div>
            </div>
            <div class="list-body">
                <!-- <div class="list-item">
                    <div class="col col-check">
                        <label>
                            <input type="checkbox" class="check-one">
                        </label>
                    </div>
                    <div class="col col-img">
                        <img src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1632713426.30988142.jpg?thumb=1&w=100&h=100"
                            alt="">
                    </div>
                    <div class="col col-detail">
                        Xiaomi Civi 8GB+128GB 闪闪黑</div>
                    <div class="col col-price">2599元</div>
                    <div class="col col-count">
                        <div class="countBox">
                            <span class="reduce">-</span>
                            <span class="countSpan">1</span>
                            <span class="add">+</span>
                        </div>
                    </div>
                    <div class="col col-subtotal">2599元</div>
                    <div class="col col-operate"><i class="iconfont icon-close delete"></i></div>
                </div>
                <div class="list-item">
                    <div class="col col-check">
                        <label>
                            <input type="checkbox" class="check-one">
                        </label>
                    </div>
                    <div class="col col-img">
                        <img src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1628588553.56819324.jpg?thumb=1&w=100&h=100"
                            alt="">
                    </div>
                    <div class="col col-detail">Xiaomi MIX 4 8GB+128GB 陶瓷黑</div>
                    <div class="col col-price">4999元</div>
                    <div class="col col-count">
                        <div class="countBox">
                            <span class="reduce">-</span>
                            <span class="countSpan">1</span>
                            <span class="add">+</span>
                        </div>
                    </div>
                    <div class="col col-subtotal">4999元</div>
                    <div class="col col-operate"><i class="iconfont icon-close delete"></i></div>
                </div>
                <div class="list-item">
                    <div class="col col-check">
                        <label>
                            <input type="checkbox" class="check-one">
                        </label>
                    </div>
                    <div class="col col-img">
                        <img src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1622000680.1781885.jpg?thumb=1&w=100&h=100"
                            alt="">
                    </div>
                    <div class="col col-detail">Redmi AirDots 3 Pro曜石黑</div>
                    <div class="col col-price">299元</div>
                    <div class="col col-count">
                        <div class="countBox">
                            <span class="reduce">-</span>
                            <span class="countSpan">1</span>
                            <span class="add">+</span>
                        </div>
                    </div>
                    <div class="col col-subtotal">299元</div>
                    <div class="col col-operate"><i class="iconfont icon-close delete"></i></div>
                </div>
                <div class="list-item">
                    <div class="col col-check">
                        <label>
                            <input type="checkbox" class="check-one">
                        </label>
                    </div>
                    <div class="col col-img">
                        <img src="https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1621955784.84614979.jpg?thumb=1&w=100&h=100"
                            alt="">
                    </div>
                    <div class="col col-detail">
                        Redmi Note 10 Pro 6GB+128GB 月魄</div>
                    <div class="col col-price">1599元</div>
                    <div class="col col-count">
                        <div class="countBox">
                            <span class="reduce">-</span>
                            <span class="countSpan">1</span>
                            <span class="add">+</span>
                        </div>
                    </div>
                    <div class="col col-subtotal">1599元</div>
                    <div class="col col-operate"><i class="iconfont icon-close delete"></i></div>
                </div> -->
            </div>
            <div class="list-footer">
                <div class="col col-continue"><a href="../html/list.html">继续购物</a></div>
                <span class="col col-sep">|</span>
                <div class="col col-center">
                    <div class="numTips">
                        已选择 <span class="selectedNum">0</span> 件
                    </div>
                    <div class="priceTips">
                        合计：<span class="selectedTotal">0</span>元
                    </div>
                </div>
                <div class="col col-total">
                    <a href="">去结算</a>
                    <!-- <div class="totalTips"> -->
                        <!-- 请勾选需要结算的商品 -->
                        <i class="iconfont icon-xiasanjiao-copy arrow"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
  <footer>
    <a href="#">
      <div class="sever-wrapper">
        <div class="footer-sever">
          <span class="icon icon-7tian"></span>
          <span>7天无理由退货</span>
        </div>
        <div class="footer-sever">
          <span class="icon icon-huanhuo"></span>
          <span>手机30天换货保障</span>
        </div>
        <div class="footer-sever">
          <span class="icon icon-baoyou"></span>
          <span>满79包邮</span>
        </div>
        <div class="footer-sever">
          <span class="icon icon-zhengpin"></span>
          <span>正品保障</span>
        </div>
      </div>
    </a>
    <div class="footer-center">
      <div class="footer-menus">
        <div class="wrapper">
          <div class="footer-menu">
            <div class="footer-title">
              推荐产品
            </div>
            <ul class="footer-list">
              <li><a href="#">真我GT Neo2T</a></li>
              <li><a href="#">真我Q3s</a></li>
              <li><a href="#">真我GT Neo2 5G</a></li>
              <li><a href="#">真我GT 大师探索版 5G</a></li>
              <li><a href="#">真我GT Neo 闪速版 5G</a></li>
              <li><a href="#">真我GT 5G</a></li>
              <li><a href="#">真我Q3 Pro 5G</a></li>
            </ul>
          </div>
          <div class="footer-menu">
            <div class="footer-title">
              服务支持
            </div>
            <ul class="footer-list">
              <li><a href="#">配送方式</a></li>
              <li><a href="#">服务政策</a></li>
              <li><a href="#">常见问题</a></li>
              <li><a href="#">故障排除</a></li>
              <li><a href="#">预装应用公示</a></li>
              <li><a href="#">R码通道</a></li>
            </ul>
          </div>
          <div class="footer-menu">
            <div class="footer-title">
              关于我们
            </div>
            <ul class="footer-list">
              <li><a href="#">关于realme</a></li>
              <li><a href="#">ColorOS官网</a></li>
              <li><a href="#">realme社区</a></li>
              <li><a href="#">加入我们</a></li>
            </ul>
          </div>
          <div class="footer-menu">
            <div class="footer-title">
              联系我们
            </div>
            <ul class="footer-list">
              <li><a href="#">service.cn@realme.com</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-contact">
        <div class="footer-contact-phone">
          400-628-0066
        </div>
        <div class="footer-contact-time">
          8:00-20:00，周一至周日
        </div>
        <div class="footer-contact-online">
          <a href="#">
            <span class="iconfont icon-kefu"></span>
            &nbsp;在线客服
          </a>
        </div>
        <div class="footer-contact-time">
          9:00-22:00，周一至周日
        </div>
        <div class="footer-contact-socials">
          <a href="#" class="footer-wechat">
            <span class="icon icon-wechat"></span>
            <i></i>
          </a>
          <a href="#" class="footer-weibo">
            <span class="icon icon-weibo"></span>
          </a>
        </div>
      </div>
    </div>
    <div class="footer-region">
      <a href="#">
        Mainland China ( 简体中文 / CNY )
      </a>
    </div>
    <div class="footer-bottom">
      <div class="wrapper">
        <div class="copyright">
          © 2019-2021 realme 版权所有. 渝ICP证20200030号
          <a href="#">渝ICP备19011033号-1</a>
          <a href="#">
            <span class=" icon icon-emblem"></span>
            渝公网安备 50011202501913号
          </a>
        </div>
        <div class="footer-legal">
          <a href="#">隐私政策</a>
          <a href="#">用户协议</a>
          <a href="#">政务政策</a>
          <a href="#">侵权投诉指引</a>
        </div>
      </div>
    </div>
  </footer>
</body>
<script type="module">
  import "../js/jquery-3.6.0.min.js";
  import { getCookie } from "../js/cookie.js";
  import { debounceFn } from "../js/tool-2.js";
  import { searchCart } from "../js/interface.js";
  import { slider, menuSwitch } from "../js/slider.js";
  import "../js/swiper.js";

  var lgc = getCookie("lgc");
  if (lgc) {
    var { status, message, list } = await searchCart({ user: lgc })
    if (status) {
      if (list.length) {
        var html = "";
        list.forEach(({ id, gid, buyNum, goodsName, goodsImg, goodsPrice }) => {
          html += `<div class="list-item">
                        <div class="col col-check">
                            <label>
                                <input type="checkbox" class="check-one">
                            </label>
                        </div>
                        <div class="col col-img">
                            <img src="${goodsImg}"
                                alt="">
                        </div>
                        <div class="col col-detail">${goodsName}</div>
                        <div class="col col-price">${goodsPrice}</div>
                        <div class="col col-count">
                            <div class="countBox">
                                <span class="reduce">-</span>
                                <span class="countSpan">${buyNum}</span>
                                <span class="add">+</span>
                            </div>
                        </div>
                        <div class="col col-subtotal">${(goodsPrice * buyNum).toFixed(2)}</div>
                        <div class="col col-operate"><i class="iconfont icon-close delete"></i></div>
                    </div>`
                })
                $(".list-body").html(html);


      } else {
        alert(message);
      }
    } else {
      alert(message);
    }
  } else {
    location.href = "../list.html?returnUrl=" + encodeURIComponent(location.href);
  }
  

  $(function () {
        var buyedNum = null;
        //全选
        $(".check-all").click(function () {
            var status = $(this).prop("checked");
            $(".check-one").prop("checked", status);
            getTotal();
        })
        
        $(".check-one").click(function () {
            isAllChecked();
            getTotal();
        })
        
        $(".add").click(function () {
            var $countSpan = $(this).prev();
            var num = $countSpan.text();
            num++;
            $countSpan.text(num);
            var price = $(this).parent().parent().prev() . text() * 1;
            var subtotal = (num * price).toFixed(2);
            $(this).parents(".col-count").next().text(subtotal);
            $(this).prev().prev().text("-");
            getTotal();
        })

        $(".reduce").click(function () {
            var $countInp = $(this).next();
            var num = $countInp.text();
            if (num == 1)
            return false;
            num--;
            if (num == 1) $(this).text("");
            $countInp.text(num);
            
            var price = $(this).parent().parent().prev() . text() * 1;
            var subtotal = (num * price).toFixed(2);
            $(this).parents(".col-count").next().text(subtotal);
            $(this).prev().prev().text("-");
            getTotal();
        })
        $(".delete").click(function () {
            if (confirm("是否删除当前商品?")) {
                $(this).parents(".list-item").remove();
                isAllChecked();
                getTotal();
                
            }
        })

        function isAllChecked() {
            // 是否存在未选中的  存在:true 不存在:false
            var flag = $(".check-one").is(":not(:checked)") ? false : true;
            $(".check-all").prop("checked", flag);
        }
        
        function getTotal() {
            var allPrice = 0;
            var sum = 0;
            $(".check-one:checked").each(function () {
                var num = $(this).parents(".list-item").find(".countSpan").text() * 1;
                var subtotal = $(this).parents(".list-item").find(".col-subtotal").text() * 1;
                sum += num;
                allPrice += subtotal;
            })
            $(".selectedNum").text(sum);
            $(".selectedTotal").text(allPrice.toFixed(2));
    }
    
    
})
</script>

</html>